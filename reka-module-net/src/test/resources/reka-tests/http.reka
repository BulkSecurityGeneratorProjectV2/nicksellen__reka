name http tests

net/http

test simple index page {
	run {
		http/request http://localhost:8073 {
			into resp
		}
	}
	expect {
		resp {
			status 200
			content looks good
		}
	}
}

test pass in some params {
	run {
		http/request http://localhost:8073/with-params?name=Nick {
			into resp
		}
	}
	expect {
		resp {
			status 200
			content your name was Nick
		}
	}
}

test return some json {
	run {
		http/request http://localhost:8073/give-me-json {
			into resp
		}
	}
	expect {
		resp {
			status 200
			headers {
				Content-Type application/json
			}
			content {
				thanks {
					for that
				}
			}
		}
	}
}

test page not found {
	run {
		http/request http://localhost:8073/should/not/exist {
			into resp
		}
	}
	expect {
		resp {
			status 404
		}
	}
}